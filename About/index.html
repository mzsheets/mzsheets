<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../data/components/globalstyle.css">
    <link rel="stylesheet" href="style.css">
    <title>About | MZsheets</title>
</head>
<body>
    <div id="top"></div>
    <div id="main-navbar"></div>
    <div id="main-footer"></div>
    <script>
        // Load the navbar
        fetch('../data/components/navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('main-navbar').innerHTML = data;

                // Set query if it exists
                if (query) {
                    document.getElementById('navbar-search-input').value = query;
                    document.getElementById('navbar-m-search-input').value = query;
                    if (query.length > 0) {
                        // Set the input box in focus (desktop only)
                        document.getElementById('navbar-search-input').focus();
                    }
                }
                updateSearchQuery(query);

                // Handle search input
                document.getElementById('navbar-search-input').addEventListener('input', handleSearchInput);
                document.getElementById('navbar-m-search-input').addEventListener('input', handleSearchInput);

                // Handle sort by option
                document.querySelector('.store-sort-by-option').addEventListener('change', (event) => {
                    const sortByOption = event.target.value; // Get the sort by option

                    const url = new URL(window.location);
                    url.searchParams.set('sort-by', sortByOption);
                    window.location.href = url;
                });

                // Handle currency option
                document.querySelector('.store-currency-option').addEventListener('change', (event) => {
                    const currencyOption = event.target.value; // Get the currency option

                    const url = new URL(window.location);
                    url.searchParams.set('currency', currencyOption);
                    window.location.href = url;
                });

                // Handle items per row option
                document.querySelector('.store-items-per-row-option').addEventListener('change', (event) => {
                    const itemsPerRowOption = event.target.value; // Get the items per row option

                    const url = new URL(window.location);
                    url.searchParams.set('items-per-row', itemsPerRowOption);
                    window.location.href = url;
                });

                // Handle rows per page option
                document.querySelector('.store-rows-per-page-option').addEventListener('change', (event) => {
                    const rowsPerPageOption = event.target.value; // Get the rows per page option

                    const url = new URL(window.location);
                    url.searchParams.set('rows', rowsPerPageOption);
                    window.location.href = url;
                });
            })
            .catch(error => console.error('Error loading navbar:', error)
        );

        // Load the footer
        fetch('../data/components/footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('main-footer').innerHTML = data;
            })
            .catch(error => console.error('Error loading footer:', error)
        );
    </script>
</body>
</html>